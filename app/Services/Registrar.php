<?php namespace Glitter\Services;

use Glitter\User;
use Validator;
use Illuminate\Contracts\Auth\Registrar as RegistrarContract;

class Registrar implements RegistrarContract {

	/**
	 * Get a validator for an incoming registration request.
	 *
	 * @param  array  $data
	 * @return \Illuminate\Contracts\Validation\Validator
	 */
	public function validator(array $data)
	{
		return Validator::make($data, [
			'name' => 'required|max:255',
			'email' => 'required|email|max:255|unique:users',
			'password' => 'required|confirmed|min:6',
            'username' => 'required|max:100|unique:users',
		]);
	}

	/**
	 * Create a new user instance after a valid registration.
	 *
	 * @param  array  $data
	 * @return User
	 */
	public function create(array $data)
	{
		return User::create([
			'name' => $data['name'],
			'email' => $data['email'],
			'password' => bcrypt($data['password']),
            'username' => $data['username'],
            'avatar' => 'image/jpeg;base64,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'
		]);
	}

}
